---
import SvelteWidget from "@meursyphus/flitter-svelte";
import { bar } from "../../content/showcases";
---

<script type="module">
  let height = null;

  document.addEventListener("DOMContentLoaded", () => {
    const chartEl = document.getElementById("chart-wrapper");
    const observer = new ResizeObserver((entries) => {
      height = entries[0].contentRect.height;
      document.getElementById("code-area").style.height =
        `calc(100vh - 50px - ${height}px)`;
    });
    observer.observe(chartEl);

    return () => observer.disconnect();
  });
</script>

<div>
  <div
    id="chart-wrapper"
    aria-label="Chart"
    class="w-full aspect-video bg-white"
  >
    <SvelteWidget
      width="100%"
      height="100%"
      renderer="svg"
      widget={bar["chartjs-basic"].widget}
    />
  </div>
  <div id="code-area" class="overflow-y-scroll">
    <slot />
  </div>
</div>
